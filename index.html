<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>App de Contas - JavaScript</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'primary': '#3B82F6',
                        'success': '#10B981',
                        'danger': '#EF4444',
                        'warning': '#F59E0B'
                    },
                    screens: {
                        'xs': '475px',
                        'sm': '640px',
                        'md': '768px',
                        'lg': '1024px',
                        'xl': '1280px',
                        '2xl': '1536px',
                    }
                }
            }
        }
    </script>
    <style>
        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f5f9;
        }
        ::-webkit-scrollbar-thumb {
            background: #cbd5e1;
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #94a3b8;
        }
        
        /* Firefox scrollbar */
        * {
            scrollbar-width: thin;
            scrollbar-color: #cbd5e1 #f1f5f9;
        }
        
        /* Hover effects */
        .btn-receita:hover {
            background-color: #059669;
            transform: translateY(-1px);
        }
        
        .btn-gasto:hover {
            background-color: #dc2626;
            transform: translateY(-1px);
        }
        
        /* Smooth transitions */
        * {
            transition: all 0.2s ease;
        }
        
        /* Responsive adjustments */
        @media (max-width: 640px) {
            .container {
                padding-left: 1rem;
                padding-right: 1rem;
            }
        }
        
        /* Full height for mobile */
        html, body {
            height: 100%;
            min-height: 100vh;
            min-height: 100dvh;
        }
        
        /* Better mobile spacing */
        @media (max-width: 480px) {
            .grid-cols-2 {
                gap: 0.75rem;
            }
        }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-50 to-indigo-100 min-h-screen w-full">
    <div class="container mx-auto px-3 sm:px-4 py-4 sm:py-6 max-w-4xl w-full">
        <!-- Header -->
        <div class="text-center mb-6 sm:mb-8">
            <div class="w-10 h-10 sm:w-12 sm:h-12 bg-yellow-400 rounded-full flex items-center justify-center shadow-lg mx-auto mb-3 sm:mb-4">
                <span class="text-xl sm:text-2xl">üí∞</span>
            </div>
            <h1 class="text-2xl sm:text-3xl font-bold text-gray-800 mb-2">Controle de gastos</h1>
            <p class="text-sm sm:text-base text-gray-600">Controle suas finan√ßas de forma simples</p>
        </div>

        <!-- Summary Cards -->
        <div class="grid grid-cols-2 gap-3 sm:gap-4 mb-6 sm:mb-8">
            <!-- Receitas -->
            <div class="bg-white rounded-lg sm:rounded-xl p-3 sm:p-4 shadow-lg border-l-4 border-green-500">
                <div class="flex items-center justify-between">
                    <div class="min-w-0 flex-1">
                        <p class="text-xs sm:text-sm text-gray-600 truncate">Receitas</p>
                        <p class="text-lg sm:text-xl lg:text-2xl font-bold text-green-600 truncate" id="total-receitas">R$ 0,00</p>
                    </div>
                    <div class="w-8 h-8 sm:w-10 sm:h-10 bg-green-100 rounded-full flex items-center justify-center flex-shrink-0 ml-2">
                        <span class="text-green-600 text-sm sm:text-base lg:text-xl">üìà</span>
                    </div>
                </div>
            </div>

            <!-- Gastos -->
            <div class="bg-white rounded-lg sm:rounded-xl p-3 sm:p-4 shadow-lg border-l-4 border-red-500">
                <div class="flex items-center justify-between">
                    <div class="min-w-0 flex-1">
                        <p class="text-xs sm:text-sm text-gray-600 truncate">Gastos</p>
                        <p class="text-lg sm:text-xl lg:text-2xl font-bold text-red-600 truncate" id="total-gastos">R$ 0,00</p>
                    </div>
                    <div class="w-8 h-8 sm:w-10 sm:h-10 bg-red-100 rounded-full flex items-center justify-center flex-shrink-0 ml-2">
                        <span class="text-red-600 text-sm sm:text-base lg:text-xl">üìâ</span>
                    </div>
                </div>
            </div>

            <!-- Saldo -->
            <div class="bg-white rounded-lg sm:rounded-xl p-3 sm:p-4 shadow-lg border-l-4 border-blue-500">
                <div class="flex items-center justify-between">
                    <div class="min-w-0 flex-1">
                        <p class="text-xs sm:text-sm text-gray-600 truncate">Saldo</p>
                        <p class="text-lg sm:text-xl lg:text-2xl font-bold text-blue-600 truncate" id="saldo-atual">R$ 0,00</p>
                    </div>
                    <div class="w-8 h-8 sm:w-10 sm:h-10 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0 ml-2">
                        <span class="text-blue-600 text-sm sm:text-base lg:text-xl">üí≥</span>
                    </div>
                </div>
            </div>

            <!-- D√≠zimo -->
            <div class="bg-white rounded-lg sm:rounded-xl p-3 sm:p-4 shadow-lg border-l-4 border-yellow-500">
                <div class="flex items-center justify-between">
                    <div class="min-w-0 flex-1">
                        <p class="text-xs sm:text-sm text-gray-600 truncate">D√≠zimo (10%)</p>
                        <p class="text-lg sm:text-xl lg:text-2xl font-bold text-yellow-600 truncate" id="total-dizimo">R$ 0,00</p>
                    </div>
                    <div class="w-8 h-8 sm:w-10 sm:h-10 bg-yellow-100 rounded-full flex items-center justify-center flex-shrink-0 ml-2">
                        <span class="text-yellow-600 text-sm sm:text-base lg:text-xl">‚õ™</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Transaction Form -->
        <div class="bg-white rounded-lg sm:rounded-xl p-4 sm:p-6 shadow-lg mb-6 sm:mb-8">
            <h2 class="text-lg sm:text-xl font-bold text-gray-800 mb-4">Adicionar Transa√ß√£o</h2>
            
            <!-- Transaction Type Toggle -->
            <div class="flex gap-2 mb-4">
                <button id="btn-receita" class="btn-receita flex-1 py-2 sm:py-3 px-3 sm:px-4 rounded-lg font-semibold text-white bg-green-500 hover:bg-green-600 transition-all text-sm sm:text-base">
                    + Receita
                </button>
                <button id="btn-gasto" class="btn-gasto flex-1 py-2 sm:py-3 px-3 sm:px-4 rounded-lg font-semibold text-white bg-red-500 hover:bg-red-600 transition-all text-sm sm:text-base">
                    - Gasto
                </button>
            </div>

            <form id="transaction-form" class="space-y-3 sm:space-y-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1 sm:mb-2">Valor</label>
                    <input type="text" id="valor" class="w-full px-3 sm:px-4 py-2 sm:py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm sm:text-base" placeholder="R$ 0,00" inputmode="numeric">
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1 sm:mb-2">Descri√ß√£o</label>
                    <input type="text" id="descricao" class="w-full px-3 sm:px-4 py-2 sm:py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm sm:text-base" placeholder="Ex: Sal√°rio, Almo√ßo, etc.">
                </div>

                <!-- Category (only for expenses) -->
                <div id="categoria-container" class="hidden">
                    <label class="block text-sm font-medium text-gray-700 mb-1 sm:mb-2">Categoria</label>
                    <select id="categoria" class="w-full px-3 sm:px-4 py-2 sm:py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm sm:text-base">
                        <option value="">Selecione uma categoria</option>
                        <option value="alimentacao">üçΩÔ∏è Alimenta√ß√£o</option>
                        <option value="transporte">üöó Transporte</option>
                        <option value="saude">üè• Sa√∫de</option>
                        <option value="educacao">üìö Educa√ß√£o</option>
                        <option value="lazer">üéÆ Lazer</option>
                        <option value="vestuario">üëï Vestu√°rio</option>
                        <option value="casa">üè† Casa</option>
                        <option value="servicos">üîß Servi√ßos</option>
                        <option value="outros">üì¶ Outros</option>
                    </select>
                </div>

                <button type="submit" id="submit-btn" class="w-full py-2 sm:py-3 px-4 bg-blue-500 text-white rounded-lg font-semibold hover:bg-blue-600 transition-all text-sm sm:text-base">
                    Adicionar Receita
                </button>
            </form>
        </div>

        <!-- Priority Bills -->
        <div class="bg-white rounded-lg sm:rounded-xl p-4 sm:p-6 shadow-lg mb-6 sm:mb-8">
            <div class="flex items-center justify-between mb-4">
                <h2 class="text-lg sm:text-xl font-bold text-gray-800">Contas Priorit√°rias</h2>
                <button id="add-bill-btn" class="bg-blue-500 text-white px-3 sm:px-4 py-1.5 sm:py-2 rounded-lg hover:bg-blue-600 transition-all text-sm sm:text-base">
                    + Adicionar
                </button>
            </div>

            <!-- Add Bill Form -->
            <div id="add-bill-form" class="hidden mb-4 sm:mb-6 p-3 sm:p-4 bg-gray-50 rounded-lg">
                <h3 class="font-semibold text-gray-800 mb-3 text-sm sm:text-base">Nova Conta Priorit√°ria</h3>
                <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4">
                    <div class="sm:col-span-2 lg:col-span-1">
                        <label class="block text-xs sm:text-sm font-medium text-gray-700 mb-1">Nome da Conta</label>
                        <input type="text" id="nome-conta" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 text-sm" placeholder="Ex: Aluguel">
                    </div>
                    <div>
                        <label class="block text-xs sm:text-sm font-medium text-gray-700 mb-1">Valor</label>
                        <input type="text" id="valor-conta" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 text-sm" placeholder="R$ 0,00" inputmode="numeric">
                    </div>
                    <div>
                        <label class="block text-xs sm:text-sm font-medium text-gray-700 mb-1">Data de Vencimento</label>
                        <input type="date" id="data-vencimento" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 text-sm">
                    </div>
                </div>
                <div class="flex gap-2 mt-3 sm:mt-4">
                    <button id="save-bill-btn" class="bg-green-500 text-white px-3 sm:px-4 py-1.5 sm:py-2 rounded-lg hover:bg-green-600 transition-all text-sm">
                        Salvar
                    </button>
                    <button id="cancel-bill-btn" class="bg-gray-500 text-white px-3 sm:px-4 py-1.5 sm:py-2 rounded-lg hover:bg-gray-600 transition-all text-sm">
                        Cancelar
                    </button>
                </div>
            </div>

            <!-- Bills List -->
            <div id="bills-list" class="space-y-2 sm:space-y-3">
                <!-- Bills will be dynamically added here -->
            </div>
        </div>

        <!-- Recent Transactions -->
        <div class="bg-white rounded-lg sm:rounded-xl p-4 sm:p-6 shadow-lg">
            <div class="flex flex-col sm:flex-row sm:items-center justify-between mb-4 gap-2 sm:gap-0">
                <h2 class="text-lg sm:text-xl font-bold text-gray-800">Transa√ß√µes Recentes</h2>
                <button id="clear-income-btn" class="bg-red-500 text-white px-3 sm:px-4 py-1.5 sm:py-2 rounded-lg hover:bg-red-600 transition-all text-sm sm:text-base self-start sm:self-auto">
                    Limpar Receitas
                </button>
            </div>
            <div id="transactions-list" class="space-y-2 sm:space-y-3">
                <!-- Transactions will be dynamically added here -->
            </div>
        </div>
    </div>

    <script>
        // Global variables
        let currentTransactionType = 'receita';
        let transactions = JSON.parse(localStorage.getItem('transactions')) || [];
        let priorityBills = JSON.parse(localStorage.getItem('priorityBills')) || [];

        // Initialize app
        document.addEventListener('DOMContentLoaded', function() {
            initializeApp();
            setupEventListeners();
            updateDisplay();
        });

        function initializeApp() {
            // Set default date to today
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('data-vencimento').value = today;
        }

        function setupEventListeners() {
            // Transaction type buttons
            document.getElementById('btn-receita').addEventListener('click', () => setTransactionType('receita'));
            document.getElementById('btn-gasto').addEventListener('click', () => setTransactionType('gasto'));

            // Transaction form
            document.getElementById('transaction-form').addEventListener('submit', handleTransactionSubmit);

            // Priority bills
            document.getElementById('add-bill-btn').addEventListener('click', toggleAddBillForm);
            document.getElementById('save-bill-btn').addEventListener('click', savePriorityBill);
            document.getElementById('cancel-bill-btn').addEventListener('click', toggleAddBillForm);

            // Clear income button
            document.getElementById('clear-income-btn').addEventListener('click', clearIncome);

            // Currency mask for transaction value
            document.getElementById('valor').addEventListener('input', applyCurrencyMask);
            document.getElementById('valor-conta').addEventListener('input', applyCurrencyMask);
        }

        function setTransactionType(type) {
            currentTransactionType = type;
            
            // Update button styles
            const receitaBtn = document.getElementById('btn-receita');
            const gastoBtn = document.getElementById('btn-gasto');
            const submitBtn = document.getElementById('submit-btn');
            const categoriaContainer = document.getElementById('categoria-container');

            if (type === 'receita') {
                receitaBtn.classList.add('bg-green-600');
                receitaBtn.classList.remove('bg-green-500');
                gastoBtn.classList.add('bg-red-500');
                gastoBtn.classList.remove('bg-red-600');
                submitBtn.textContent = 'Adicionar Receita';
                categoriaContainer.classList.add('hidden');
            } else {
                receitaBtn.classList.add('bg-green-500');
                receitaBtn.classList.remove('bg-green-600');
                gastoBtn.classList.add('bg-red-600');
                gastoBtn.classList.remove('bg-red-500');
                submitBtn.textContent = 'Adicionar Gasto';
                categoriaContainer.classList.remove('hidden');
            }
        }

        function applyCurrencyMask(event) {
            let value = event.target.value.replace(/\D/g, '');
            if (value === '') {
                event.target.value = '';
                return;
            }
            
            // Convert to currency format
            const numericValue = parseInt(value) / 100;
            event.target.value = numericValue.toLocaleString('pt-BR', {
                style: 'currency',
                currency: 'BRL'
            });
        }

        function handleTransactionSubmit(event) {
            event.preventDefault();
            
            const valor = document.getElementById('valor').value;
            const descricao = document.getElementById('descricao').value;
            const categoria = document.getElementById('categoria').value;

            if (!valor || !descricao) {
                alert('Por favor, preencha todos os campos obrigat√≥rios.');
                return;
            }

            // Parse currency value
            const numericValue = parseFloat(valor.replace(/[^\d,]/g, '').replace(',', '.'));

            const transaction = {
                id: Date.now(),
                tipo: currentTransactionType,
                valor: numericValue,
                descricao: descricao,
                categoria: categoria || null,
                data: new Date().toISOString()
            };

            transactions.unshift(transaction);
            localStorage.setItem('transactions', JSON.stringify(transactions));
            
            // Clear form
            document.getElementById('valor').value = '';
            document.getElementById('descricao').value = '';
            document.getElementById('categoria').value = '';
            
            updateDisplay();
        }

        function toggleAddBillForm() {
            const form = document.getElementById('add-bill-form');
            form.classList.toggle('hidden');
        }

        function savePriorityBill() {
            const nome = document.getElementById('nome-conta').value;
            const valor = document.getElementById('valor-conta').value;
            const dataVencimento = document.getElementById('data-vencimento').value;

            if (!nome || !valor || !dataVencimento) {
                alert('Por favor, preencha todos os campos.');
                return;
            }

            // Parse currency value
            const numericValue = parseFloat(valor.replace(/[^\d,]/g, '').replace(',', '.'));

            const bill = {
                id: Date.now(),
                nome: nome,
                valor: numericValue,
                data_vencimento: dataVencimento,
                paga: false
            };

            priorityBills.unshift(bill);
            localStorage.setItem('priorityBills', JSON.stringify(priorityBills));
            
            // Clear form
            document.getElementById('nome-conta').value = '';
            document.getElementById('valor-conta').value = '';
            document.getElementById('data-vencimento').value = new Date().toISOString().split('T')[0];
            
            toggleAddBillForm();
            updateDisplay();
        }

        function markBillAsPaid(billId) {
            const bill = priorityBills.find(b => b.id === billId);
            if (bill) {
                bill.paga = !bill.paga;
                localStorage.setItem('priorityBills', JSON.stringify(priorityBills));
                updateDisplay();
            }
        }

        function deleteBill(billId) {
            if (confirm('Tem certeza que deseja excluir esta conta?')) {
                priorityBills = priorityBills.filter(b => b.id !== billId);
                localStorage.setItem('priorityBills', JSON.stringify(priorityBills));
                updateDisplay();
            }
        }

        function clearIncome() {
            if (confirm('Tem certeza que deseja limpar todas as receitas?')) {
                transactions = transactions.filter(t => t.tipo !== 'receita');
                localStorage.setItem('transactions', JSON.stringify(transactions));
                updateDisplay();
            }
        }

        function updateDisplay() {
            updateSummaryCards();
            updateTransactionsList();
            updateBillsList();
        }

        function updateSummaryCards() {
            const receitas = transactions.filter(t => t.tipo === 'receita').reduce((sum, t) => sum + t.valor, 0);
            const gastos = transactions.filter(t => t.tipo === 'gasto').reduce((sum, t) => sum + t.valor, 0);
            const dizimo = receitas * 0.10;
            const saldo = receitas - gastos - dizimo;

            document.getElementById('total-receitas').textContent = formatCurrency(receitas);
            document.getElementById('total-gastos').textContent = formatCurrency(gastos);
            document.getElementById('total-dizimo').textContent = formatCurrency(dizimo);
            document.getElementById('saldo-atual').textContent = formatCurrency(saldo);
        }

        function updateTransactionsList() {
            const container = document.getElementById('transactions-list');
            container.innerHTML = '';

            if (transactions.length === 0) {
                container.innerHTML = '<p class="text-gray-500 text-center py-4">Nenhuma transa√ß√£o encontrada.</p>';
                return;
            }

            transactions.slice(0, 10).forEach(transaction => {
                const div = document.createElement('div');
                div.className = 'flex items-center justify-between p-2 sm:p-3 bg-gray-50 rounded-lg';
                
                const isReceita = transaction.tipo === 'receita';
                const icon = isReceita ? 'üìà' : 'üìâ';
                const color = isReceita ? 'text-green-600' : 'text-red-600';
                const bgColor = isReceita ? 'bg-green-100' : 'bg-red-100';
                
                div.innerHTML = `
                    <div class="flex items-center space-x-2 sm:space-x-3 min-w-0 flex-1">
                        <div class="w-6 h-6 sm:w-8 sm:h-8 ${bgColor} rounded-full flex items-center justify-center flex-shrink-0">
                            <span class="text-xs sm:text-sm">${icon}</span>
                        </div>
                        <div class="min-w-0 flex-1">
                            <p class="font-medium text-gray-800 text-sm sm:text-base truncate">${transaction.descricao}</p>
                            <p class="text-xs sm:text-sm text-gray-500">${formatDate(transaction.data)}</p>
                            ${transaction.categoria ? `<p class="text-xs text-slate-400 mt-1 truncate">${getCategoryName(transaction.categoria)}</p>` : ''}
                        </div>
                    </div>
                    <div class="text-right flex-shrink-0 ml-2">
                        <p class="font-bold ${color} text-sm sm:text-base">${isReceita ? '+' : '-'}${formatCurrency(transaction.valor)}</p>
                    </div>
                `;
                
                container.appendChild(div);
            });
        }

        function updateBillsList() {
            const container = document.getElementById('bills-list');
            container.innerHTML = '';

            if (priorityBills.length === 0) {
                container.innerHTML = '<p class="text-gray-500 text-center py-4">Nenhuma conta priorit√°ria encontrada.</p>';
                return;
            }

            priorityBills.forEach(bill => {
                const div = document.createElement('div');
                div.className = `flex flex-col sm:flex-row sm:items-center justify-between p-2 sm:p-3 rounded-lg gap-2 sm:gap-0 ${bill.paga ? 'bg-green-50 border border-green-200' : 'bg-gray-50'}`;
                
                const statusIcon = bill.paga ? '‚úÖ' : '‚è∞';
                const statusText = bill.paga ? 'Paga' : 'Pendente';
                const statusColor = bill.paga ? 'text-green-600' : 'text-yellow-600';
                
                div.innerHTML = `
                    <div class="flex items-center space-x-2 sm:space-x-3 min-w-0 flex-1">
                        <div class="w-6 h-6 sm:w-8 sm:h-8 bg-white rounded-full flex items-center justify-center flex-shrink-0">
                            <span class="text-xs sm:text-sm">${statusIcon}</span>
                        </div>
                        <div class="min-w-0 flex-1">
                            <p class="font-medium text-gray-800 text-sm sm:text-base truncate">${bill.nome}</p>
                            <p class="text-xs sm:text-sm text-gray-500">Vence: ${formatDate(bill.data_vencimento)}</p>
                            <p class="text-xs ${statusColor}">${statusText}</p>
                        </div>
                    </div>
                    <div class="flex items-center justify-between sm:justify-end space-x-2 sm:space-x-2">
                        <p class="font-bold text-gray-800 text-sm sm:text-base">${formatCurrency(bill.valor)}</p>
                        <div class="flex space-x-1">
                            <button onclick="markBillAsPaid(${bill.id})" class="px-2 sm:px-3 py-1 bg-blue-500 text-white text-xs rounded hover:bg-blue-600 transition-all whitespace-nowrap">
                                ${bill.paga ? 'Desmarcar' : 'Paga'}
                            </button>
                            <button onclick="deleteBill(${bill.id})" class="px-2 sm:px-3 py-1 bg-red-500 text-white text-xs rounded hover:bg-red-600 transition-all">
                                Excluir
                            </button>
                        </div>
                    </div>
                `;
                
                container.appendChild(div);
            });
        }

        function formatCurrency(value) {
            return value.toLocaleString('pt-BR', {
                style: 'currency',
                currency: 'BRL'
            });
        }

        function formatDate(dateString) {
            const date = new Date(dateString);
            return date.toLocaleDateString('pt-BR');
        }

        function getCategoryName(category) {
            const categories = {
                'alimentacao': 'üçΩÔ∏è Alimenta√ß√£o',
                'transporte': 'üöó Transporte',
                'saude': 'üè• Sa√∫de',
                'educacao': 'üìö Educa√ß√£o',
                'lazer': 'üéÆ Lazer',
                'vestuario': 'üëï Vestu√°rio',
                'casa': 'üè† Casa',
                'servicos': 'üîß Servi√ßos',
                'outros': 'üì¶ Outros'
            };
            return categories[category] || category;
        }
    </script>
</body>
</html>
